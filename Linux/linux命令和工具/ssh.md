# ssh （Secure Shell）

## SSH , SSL , TLS

> SSL（Secure Socket Layer--安全套接字层）：为网络通信安全以及数据完整性提供保障的一种安全协议，在TCP/IP的传输层对网络连接进行加密；
    
> TSL（Transport Layer Security--传输层安全）：为SSL 3.0的后继版本，TSL与SSL 3.0的显著差别在于加密算法不同，TSL的主要目的是使SSL更加安全，使协议的规范更加精确和完善，在TCP/IP的传输层对网络连接进行加密；
  
> SSH（Secure Shell）：由 IETF 的网络工作小组（Network Working Group）所制定；SSH 为建立在应用层和传输层基础上的安全协议。SSH 是目前较可靠，专为远程登录会话和其他网络服务提供安全性的协议。利用 SSH 协议可以有效防止远程管理过程中的信息泄露问题。

## Overview

> Secure Shell(SSH) 是由 IETF(The Internet Engineering Task Force) 制定的建立在应用层基础上的安全网络协议。专为远程登录会话和其他网络服务提供安全性的协议。SSH 仅是一种协议，而openSSH是SSH的开源实现，SSH通常监听 Port 22。

> SSH提供两种验证方法
   - 基于口令的安全认证 ：

         只要你知道自己帐号和口令，就可以登录到远程主机。所有传输的数据都会被加密，但是不能保证你正在连接的服务器就是你想连接的服务器。可能会有别的服务器在冒充真正的服务器，也就是受到“中间人攻击”这种方式的攻击
   - 基于密钥的安全验证：
         
         你必须为自己创建一对密钥，并把公钥放在需要访问的服务器上。如果你要连接到SSH服务器上，客户端软件就会向服务器发出请求，请求用你的密钥进行安全验证。服务器收到请求之后，先在该服务器上你的主目录下寻找你的公钥，然后把它和你发送过来的公钥进行比较。如果两个密钥一致，服务器就用公钥加密“质询”(challenge)并把它发送给客户端软件。客户端软件收到“质询”之后就可以用你的私钥在本地解密再把它发送给服务器完成登录。与第一种级别相比，第二种级别不仅加密所有传输的数据，也不需要在网络上传送口令，因此安全性更高，可以有效防止中间人攻击。


## ssh 命令

### 认证
   
   - 使用口令认证
     
     ```
     ssh ocp@10.225.26.180
     ```

   - 使用秘钥登录 (-i 指定私钥文件路径)
     ```
      ssh -i .ssh/landh-hf-qa.pem ocp@10.225.26.180
     ```

### 远程执行命令/脚本

   - 远程执行命令或脚本
      
      ```
      ssh menzhu@10.241.40.40 "pwd; cd ../../; pwd"

      ssh menzhu@10.241.40.40 "./test.sh 12"
      ```

      > 远程命令用双引号或者双引号包括起来，跟随在ssh命令后面

      ![][1]

   - 远程执行本地脚本
     
     > ssh命令可以将本地的脚本传到远端执行

     ```
     ssh menzhu@10.241.40.40 "bash -s" < test.sh 12
     ```
     ![][2]


## 参考文档

[ssh 远程执行命令](https://www.cnblogs.com/youngerger/p/9104144.html)

[SSH简介及两种远程登录的方法](https://blog.csdn.net/li528405176/article/details/82810342)



[1]: pic/ssh远程指令1.PNG
[2]: pic/ssh远程指令2.PNG