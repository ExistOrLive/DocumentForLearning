
`vector`为了支持随机访问，元素在内存中连续存储。随着`vector`中的元素不断增加，分配存储空间不够，就需要重新分配新的空间，将原本空间中的元素拷贝到新的空间，再将原本的空间释放。


## 管理容量成员函数

```c++

capacity();        // 容器的当前容量

size();            // 容器当前保存的元素数量

shrink_to_fit();    // 请求将capacity减少到与size一致

reserve(n);         // 分配至少能容纳n个元素的存储空间

```

`reserve` 申请的空间不大于当前容器的容量，则什么都不做；当申请的空间大于当前容量的空间才会重新分配需要的空间。


`shrink_to_fit` 要求`string`,`vector`,`deque`退回不需要的内存空间，但是具体实现可以忽略。


## vector的内存分配策略

有的实现在需要重新分配空间时，申请当前空间双倍的空间；也有申请1.5倍的；具体的分配策略要依据具体的实现。


但是必须遵守原则：

- 只有在迫不得已的时候才可以分配新的空间（避免多余的申请，销毁内存的开销）

- 确保push_back的高效率

