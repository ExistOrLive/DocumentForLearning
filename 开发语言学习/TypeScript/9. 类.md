
类（class）是面向对象编程的基本构件，封装了属性和方法。

JavaScript 语言中，类只是构造函数的一种语法糖，本质上是构造函数的另一种写法。所以，类的自身类型可以写成构造函数的形式。

### 1. 属性的定义

```ts 
class Point {
    x:number;
    y:number;
    z?: number;      // 可选属性
    readonly color: string; // 只读属性
}
```

可以给出属性的初始值

```ts 
class Point {
    x:number = 0;
    y:number = 0;
    z?: number;
    readonly color: string = "000000";
}
```

TypeScript 有一个配置项 **strictPropertyInitialization**，只要打开（默认是打开的），就会检查属性是否设置了初值，如果没有就报错。

![](https://pic.existorlive.cn//202402181201774.png)

属性还可以在构造函数中初始化: 

```ts 
class Point {
    x: number; 
    y: number; 

    constructor(x: number, y: number) {
        this.x = x 
        this.y = y 
    }
}
```

![](https://pic.existorlive.cn//202402181202176.png)

这样的写法等于对同一个属性要声明两次类型，一次在类的头部，另一次在构造方法的参数里面；TypeScript 就提供了一种简写形式。

在简写方式中，属性的声明放到了构造器的参数列表中; 在参数列表中必须显示指定属性的访问控制符

```ts
class Point {
    constructor(public x: number, 
                public y: number,
                public readonly color: string,
                public z?: number) {
    
    }
}

const p = new Point(1,2, "000000");

console.log(p.x);  // 1
```

### 2. 构造器的定义

构造器以 `constructor` 作为方法名，不能声明返回值类型。


```ts 
class Point {
  x: number;
  y: number;

  constructor(x = 0, y = 0) {
    this.x = x;
    this.y = y;
  }
}
```

构造器也可以重载

```ts
class Point {
  constructor(x:number, y:string);
  constructor(s:string);
  constructor(xs:number|string, y?:string) {
    // ...
  }
}
```
### 3. 方法的定义

```ts
class Point {
  x:number;
  y:number;

  constructor(x:number, y:number) {
    this.x = x;
    this.y = y;
  }

  add(point:Point): Point {
    return new Point(
      this.x + point.x,
      this.y + point.y
    );
  }
}
```

### 4. 存取器方法

存取器（accessor）是特殊的类方法，包括取值器（getter）和存值器（setter）两种方法。

它们用于读写某个属性，取值器用来读取属性，存值器用来写入属性。

```ts
class C {
  _name = '';
  get name() {
    return this._name;
  }
  set name(value) {
    this._name = value;
  }
}
```

1. 如果某个属性只有get方法，没有set方法，那么该属性自动成为只读属性。
2. TypeScript 5.1 版之前，set方法的参数类型，必须兼容get方法的返回值类型，否则报错
3. get方法与set方法的可访问性必须一致，要么都为公开方法，要么都为私有方法。



### 5. 静态成员

类的内部可以使用static关键字，定义静态成员。

静态成员是只能通过类本身使用的成员，不能通过实例对象使用。

```ts 
class MyClass {
  static x = 0;
  static printX() {
    console.log(MyClass.x);
  }
}

MyClass.x // 0
MyClass.printX() // 0
```

public和protected的静态成员可以被继承。

```ts 
class A {
  public static x = 1;
  protected static y = 1;
}

class B extends A {
  static getY() {
    return B.y;
  }
}

B.x // 1
B.getY() // 1

```

静态变量被继承后，本质上 B.x 和 A.x 不是同一个变量

### 6. 实现interface


### 7. 继承 class


### 8. 访问修饰符


### 9. 抽象类/抽象成员/泛型类


### 10. this

