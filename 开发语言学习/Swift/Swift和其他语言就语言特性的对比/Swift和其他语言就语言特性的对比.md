# Swift和OC，C，C++的对比

## 1. Swift的类型推断

- Swift的变量和常量在声明时可以不指定类型，可以根据传入的值来推断相应的类型。

- C++11标准中也提供了用于类型推断的`auto`关键字，根据传入的值来判断对象的类型

- OC中并没有类型推断的机制，但是由于OC中几乎所有的类型都继承于`NSObject`,可以用`NSObject *` 和`id`声明指向所有对象的变量

- C中并没有类型推断的机制



## 2. Swift的类型安全

Swift的类型安全最重要的一点就是不会发生隐式的类型转换，在算术类型溢出时会直接报错。

C/C++，OC语言在算术运算中，会隐式地将运算对象转换为相同的类型才计算，溢出时也只会截取对应位数上的数据。所以经常会发生计算结果和预期不一致的情况。

特别是C++，通过转换构造函数和转换运算符的重载，还支持类类型之间的隐式转换，更是增加了由于隐式类型转换导致错误的几率。



## 3. Swift的写时拷贝

不同的开发语言中的对象基本上可以分为

- 值对象
   
    C/C++/Swift中的对象是值对象，在值传递的过程中，会发生拷贝。如果值的数据很大，拷贝的开销也很大。

    在C/C++/Swift语言中，如何避免不必要的拷贝或者在函数调用中共享对象，是一个需要解决的问题。

    - 在C语言中，就是通过传递值对象指针的方式

    - 在C++中，通过引用变量的方式

    - Swift中，则是通过写时拷贝机制(避免不需要的拷贝) 还有输入输出对象(在函数调用时共享对象)

   

    

- 引用对象

    OC中的对象是引用对象，通过一个指针引用一个堆内存中的实际对象。在传递时，只是传递对象的指针，不会发生对象的拷贝(除非调用copy方法显式拷贝)。

    引用对象有一个问题。同时有多个指针指向同一个对象，在怎么确定对象不再使用，何时去销毁对象很困难。在OC中就是自动引用计数的机制解决这个问题。
    
    当然在C/C++语言中，使用动态内存时，也需要考虑何时去销毁动态内存中的对象。(手动销毁或使用智能指针)

## 4. main函数

C/C++/OC/Java等语言以main函数作为整个程序的入口地址

Swift类似脚本语言没有main函数


## 5. 函数参数默认值以及可变参数

Swift的函数参数可以提供默认值；也支持可变参数
但是Swift函数参数默认值可以不拘泥于顺序，与python相似


C语言不支持默认值； 支持可变参数

C++支持参数默认值； 支持可变参数

OC 都不支持

## 6. 闭包，代码块，函数指针，lambda表达式

在编程语言，往往会需要 **能够捕获变量，具有生命周期状态的匿名可调用对象** 作为函数的回调。

C语言中 使用函数指针

C++中 使用lambda表达式，bind函数

OC中 使用Block

Swift则提供了闭包




