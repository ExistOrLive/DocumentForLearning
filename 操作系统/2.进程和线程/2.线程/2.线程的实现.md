# 线程的实现

## 1.  用户线程 

在用户态实现，对操作系统不可见

    POSIX pThread，Mach C-threads，Solaris threads；

![](https://pic.existorlive.cn/%E6%88%AA%E5%B1%8F2020-09-28%20%E4%B8%8A%E5%8D%887.43.24.png)

**操作系统无法看到线程，无法处理线程切换；只能对进程进行调度。**

### 用户线程的缺点

- 当一个线程阻塞，整个进程也会阻塞。

- 当一个线程开始运行，除非它主动交出CPU的使用权，否则它所在进程的其他线程也无法运行。

- 由于时间片分配给进程，相对与其他进程，在多线程执行时，每个线程得到的时间片较少，执行较慢


## 2. 内核线程

在内核态实现

      windows，Solaris，Linux

![](https://pic.existorlive.cn/%E6%88%AA%E5%B1%8F2020-09-28%20%E4%B8%8A%E5%8D%887.52.24.png)

线程对于操作系统可见，操作系统可以直接调度线程。

线程的创建，终止，切换都要陷入内核


## 3. 轻量级进程：

在内核实现，支持用户线程

        Solaris
  
它是内核支持的用户线程。一个进程可有一个或者多个轻量级进程，每个轻量级进程有一个单独的内核线程来支持。

![](https://pic.existorlive.cn/%E6%88%AA%E5%B1%8F2020-09-28%20%E4%B8%8A%E5%8D%888.05.15.png)