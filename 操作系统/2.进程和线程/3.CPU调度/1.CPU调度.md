# CPU调度

从就绪队列中挑选一个进程占用CPU运行；
从多个可用的CPU中挑选就绪进程可使用的CPU

## 1. CPU调度的时机

- 一个进程从运行态切换到等待状态
- 一个进程被终结了

### 1.1 非抢占系统

调度程序必须等待当前进程结束，否则即便当前进程阻塞也不会切换进程

### 1.2 抢占系统

- 调度程序在中断被响应后执行

- 当前的进程被抢占
   - 当前进程时间片结束
   - 高优先级进程从阻塞切换到就绪

## 2. CPU调度的准则

进程在执行过程中，会在CPU忙状态和I/O忙状态之间交替。

![](https://github.com/existorlive/existorlivepic/raw/master/%E6%88%AA%E5%B1%8F2020-09-29%20%E4%B8%8B%E5%8D%883.54.26.png)



### 2.1 调度算法的指标

- CPU利用率：CPU处于忙状态所占时间比

- 吞吐量： 单位时间内完成的进程数量

- 周转时间 ： 进程从初始化到结束(包括等待)的总时间

- 等待时间： 进程在就绪队列中的总时间

- 响应时间： 从提交请求到产生响应所花费的时间


### 2.2 吞吐量和延迟

调度算法的总体要求是**快**，但是快有两个方面：

- 传输文件时要求速度快，体现在调度算法的**高吞吐量**
- 玩游戏要求低延迟，体现在调度算法的**延迟低，响应时间短**

这两个目标是相互独立的

### 2.3 调度算法的目标

1. 响应时间目标（交互体验）
    
    - 减少响应时间
    - 减少平均响应时间的波动

2. 吞吐量目标 （计算带宽）

    - 增加吞吐量 
    - 减少等待时间

3. 公平性目标

    - 保证每个进程占用相同的CPU时间 或者 保证每个进程的等待时间相同
    - 公平性会增加平均等待时间
    



