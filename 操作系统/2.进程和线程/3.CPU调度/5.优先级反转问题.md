#  优先级反转现象

**优先级反转** ：在任何基于优先级的可抢占的系统中，高优先级的任务等待低优先级任务的现象。


在系统中有T1，T2和T3三个任务，优先级递减。三个任务共享同一个资源S：

![](https://pic.existorlive.cn/%E6%88%AA%E5%B1%8F2020-10-05%20%E4%B8%8B%E5%8D%887.37.28.png)

- 当系统中只有任务T3执行，T3占用资源S；

- 任务T1开始执行，抢占CPU，T3进入等待队列。T1然后访问资源S，但S被T3占用，T1任务阻塞，T3继续执行。

- 任务T2开始执行，抢占CPU。

T1任务优先级最高，但是却需要等待任务T2完成，出现了高优先级的任务等待低优先级任务的现象。


## 优先级继承

在T1被阻塞时，T3继承T1的优先级

![](https://pic.existorlive.cn/%E6%88%AA%E5%B1%8F2020-10-05%20%E4%B8%8B%E5%8D%887.49.51.png)

## 优先级天花板

资源的存在优先级，优先级同于访问资源的任务的最高优先级。
