# 进程的状态

## 1. 进程的生命周期

![](https://gitee.com/existorlive/exist-or-live-pic/raw/master/%E6%88%AA%E5%B1%8F2020-09-27%20%E4%B8%8A%E5%8D%881.54.22.png)

- 进程创建

- 进程就绪

- 进程运行

- 进程阻塞

- 进程结束

### 1.1 进程创建

进程创建的时机：

- 系统初始化
   
      系统初始化创建init进程，
      init进程负责创建其他进程

- 用户请求创建一个进程

- 正在运行的进程执行创建进程的系统调用
  

### 1.2  进程运行

内核选择一个就绪态进程，占用cpu运行


### 1.3 进程阻塞

1. 请求并等待系统服务，无法马上完成

2. 启动某种操作，无法马上完成

3. 需要的数据没有到达

**进程只能自己阻塞自己，因为进程自身才知道何时需要等待某种时间发生**

### 1.4 进程唤醒（进程就绪）

1. 被阻塞进程需要的资源被满足
2. 被阻塞进程等待的事件到达
3. 将该进程的PCB插入到就绪队列

**进程只能被别的进程或者操作系统唤醒**

### 1.5 进程结束

进程结束的情况：

- 正常退出(自愿的)
- 错误退出(自愿的)
- 致命错误(强制性的)
- 被其他进程杀死(强制性的)


## 2. 进程状态变化模型

进程的三种基本状态：
进程在生命中结束前处于且仅处于三种基本状态：

![](https://gitee.com/existorlive/exist-or-live-pic/raw/master/%E6%88%AA%E5%B1%8F2020-09-27%20%E4%B8%8A%E5%8D%882.04.09.png)

- 运行状态：进程正在CPU上运行
- 就绪状态：进程获得了除CPU的一切资源，一旦获得CPU即可运行
- 阻塞状态： 一个进程等待某一事件而暂停运行

![](https://gitee.com/existorlive/exist-or-live-pic/raw/master/%E6%88%AA%E5%B1%8F2020-09-27%20%E4%B8%8A%E5%8D%882.06.05.png)

- New -> Ready:
    
      进程被创建完成并初始化，插入就绪队列

- Ready -> Running:

       就绪态的进程被调度程序选中占用CPU运行

- Running -> Ready

       正在运行的进程由于CPU时间片结束让出CPU

- Running -> Exit

       正在运行的进程完成任务或者出错，当前进程会被交由操作系统做结束处理

- Running -> Blocked

       进程等待某个事件发生，
       如等待定时器完成，等到文件打开

- Blocked -> Ready
        
        等待的事件到达


## 3. 进程挂起

**进程在挂起状态没有占用内存空间**，处在挂起状态的进程映像保存在磁盘中。

进程的挂起状态是为了合理利用系统资源。

![](https://gitee.com/existorlive/exist-or-live-pic/raw/master/%E6%88%AA%E5%B1%8F2020-09-27%20%E4%B8%8A%E5%8D%882.20.09.png)

### 3.1 挂起的状态

- 阻塞挂起状态 
    
       进程等待某个事件发生，映像在外存

- 就绪挂起状态

       进程在外存，只要进入内存，占用cpu即可运行

### 3.2 状态转换

1. 挂起：进程从内存进入外存
  
   - 阻塞 -> 阻塞挂起

   - 就绪 -> 就绪挂起

   - 运行 -> 就绪挂起
    
         对于抢占式分时系统，如果有高优先级的进程会强占当前进程且需要更多的资源，当前进程进入就绪挂起状态

2. 在外存的状态转换
   
   - 阻塞挂起 -> 就绪挂起

3. 进程从外存到内存

    - 就绪挂起 -> 就绪
    - 阻塞挂起 -> 阻塞


## 4. 进程状态队列

操作系统根据进程状态将PCB组成不同的队列： 就绪队列，各种类型的阻塞队列

![](https://gitee.com/existorlive/exist-or-live-pic/raw/master/%E6%88%AA%E5%B1%8F2020-09-27%20%E4%B8%8A%E5%8D%882.40.17.png)













