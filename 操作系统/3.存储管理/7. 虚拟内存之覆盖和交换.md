# 覆盖和交换技术

## 1. 覆盖技术

### 1.1 目标

在较小的可用内存中，运行较大的程序

### 1.2 实现

依据程序逻辑结构，将程序划分为若干功能相对独立
的模块；将不会同时执行的模块共享同一块内存区域，按照先后顺序执行。

- 必要部分（常用功能）的代码和数据常驻内存

- 可选部分（不常用功能）放在其他程序模块中,只在需要用到时装入内存

- 不存在调用关系的模块可相互**覆盖**，共用同一块内存区域，实现时分复用。


![](https://gitee.com/existorlive/exist-or-live-pic/raw/master/%E6%88%AA%E5%B1%8F2020-10-18%20%E4%B8%8B%E5%8D%883.21.10.png)


### 1.3 优缺点

- 增加编程困难
    
    - 需程序员划分功能模块，并确定模块间的覆盖关系

- 增加执行时间
  
    - 从外存装入覆盖模块
    - 时间换空间



## 2. 交换技术

### 2.1 目标

增加正在运行或需要运行的程序的内存

### 2.2 实现

将暂时不需要执行的程序放到外存

- 换入换出的基本单位
    
       整个进程的地址空间

![](https://gitee.com/existorlive/exist-or-live-pic/raw/master/%E6%88%AA%E5%B1%8F2020-10-18%20%E4%B8%8B%E5%8D%883.39.54.png)

## 2.3 问题

1. 交换的时机
   
       只当内存空间不够或有不够的可能时换出

2. 交换区的大小
        
       存放所有用户进程的所有内存映像的拷贝

3. 进程换入换出的重定位
       
       进程换入后不一定再放入原本的位置，需要动态地址映射



## 3. 覆盖和交换的比较

- 覆盖 

    - 只能发生在没有调用关系的模块间
    - 程序员须给出模块间的逻辑覆盖结构
    - 发生在运行程序的内部模块间

- 交换
  
    - 以进程为单位
    - 由操作系统完成
    - 发生在内存进程间




