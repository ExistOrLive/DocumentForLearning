# 运算符

## 1. 算术运算符

## 2. 逻辑和关系运算符

### 逻辑与和逻辑或运算符

**短路求值**

- 对于逻辑与运算符，当左侧运算对象为假时就不对右侧运算对象求值

- 对于逻辑或运算符，当左侧运算对象为真时就不对右侧运算对象求值

## 3. 赋值运算符

赋值运算符的左侧运算对象必须是一个可以修改的左值。

```c++
int i = 0, j = 0, k = 0;
const int ci = i;         // 初始化不是赋值


1024 = k;
i + j = k;
ci = k;            // 1024, i + j,ci 都不可以修改，都是右值。
```

如果赋值运算符的左右两个运算对象类型不同，则右侧运算对象将转换为左侧运算对象的类型。

```c++
k = 12.3;       // 12.3 将转换为整型数12
```
### 列表初始化

```c++
k = {12,1};     // 错误 k 只能赋一个值
k = {12.3};     // 错误，列表赋值不能够发生精度丢失

vector<int> vi;
vi = {0,1,2,3,4,5};

```

- 如果左侧运算对象是内置类型，那么列表初始化最多只能包含一个值，而且该值即使转换的话其所占的空间不应该大于目标类型的空间（不能出现精度丢失）

- 对于类类型来说，赋值运算的细节由类本身决定

- 无论左侧运算对象的类型是什么，初始值列表都可以为空。


## 4. 自增和自减运算符

### Tip

> 除非必须，否则不要使用自增自减运算符的后置版本（会造成一定的浪费）。

相比于前置版本，后置版本会讲原始值存储下来以便于返回未修改的内容。如果我们不需要修改前的值，那么后置版本的操作就是一种浪费。


## 5. 成员访问运算符

```c++
string s = "Hello World";
string *sstr = &s;

sstr->size();
(*sstr).size();

```
## 6. 条件运算符

```c++
cond ? expr1 : expr2;
```
## 7. 位运算符

运算符|功能|用法
----|----|----
~|按位取反|`~expr`
<<|左移|`expr1<<expr2`
>>|右移|`expr1>>expr2`
&|按位与|`expr1 & expr2`
^|按位异或|`expr1 ^ expr2`
\||按位或|`expr1 | expr2`

### Tip

如果运算对象是有符号的且为负数，那么位运算符如何处理运算对象的“符号位”依赖于机器。

**强烈建议位运算符用于处理无符号数。**

### 7.1 移位运算符

```c++
unsigned char bits = 0233;     // 8进制233

// 首先bits转成与8一致的int型
bits << 8;             

```

**移位运算符的左右运算符对象计算前，会转成相同类型**

## 8. sizeof运算符

sizeof运算符返回一条表达式或者一个类型名字所带的字节，返回size_t类型。

```c++
sizeof(type)
sizeof expr

Sales_data data, *p;

sizeof(Sales_data);         // 存储Sales_data类型所占的存储空间
sizeof data;                // Sales_data类型所占的存储空间

sizeof p;                   // Sales_data * 指针占的存储空间

sizeof *p;                  // Sales_data类型所占的存储空间

sizeof data.revenue;        // Sales_data的revenue变量所占的存储空间

sizeof Sales_data::revenue;  // Sales_data的revenue变量所占的存储空间

int a = 1, &b = a;

sizeof b;                  // b引用的对象a的大小

string s = "Hello World";
sizeof s;                  // 返回string类型固定部分的大小，不会返回字符串长度

vector v = {1,2,2};
sizeof v;                  // 返回vector类型固定部分的大小， 不会返回元素所占空间

int a[10];
sizeof a;                  // 返回数组10个元素所占的空间

```

## 9. 逗号运算符











